<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Keys &amp; Thumbprints | Ink Protocol</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.5.0">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
        
    
    
    <link rel="next" href="./schemas.html" />
    
    
    <link rel="prev" href="./identities-structure-and-api.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="gitbook/style.css">


        
    <div class="book" data-level="0.1.2" data-basepath="." data-revision="1426104307328">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="0.1" data-path="identities.html">
            
                
                    <a href="./identities.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.1.</b>
                        
                         Identities
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="0.1.1" data-path="identities-structure-and-api.html">
            
                
                    <a href="./identities-structure-and-api.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.1.1.</b>
                        
                         Structure &amp; API
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="0.1.2" data-path="identities-keys-and-thumbprints.html">
            
                
                    <a href="./identities-keys-and-thumbprints.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.1.2.</b>
                        
                         Keys &amp; Thumbprints
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="0.2" data-path="schemas.html">
            
                
                    <a href="./schemas.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.2.</b>
                        
                         Schemas
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="0.2.1" data-path="schemas-structure-and-api.html">
            
                
                    <a href="./schemas-structure-and-api.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.2.1.</b>
                        
                         Structure &amp; API
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="0.3" data-path="instances.html">
            
                
                    <a href="./instances.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.3.</b>
                        
                         Instances
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="0.3.1" data-path="instances-structure-and-api.html">
            
                
                    <a href="./instances-structure-and-api.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.3.1.</b>
                        
                         Structure &amp; API
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="0.3.2" data-path="instances-signatures.html">
            
                
                    <a href="./instances-signatures.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.3.2.</b>
                        
                         Signatures
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="0.4" data-path="services.html">
            
                
                    <a href="./services.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.4.</b>
                        
                         Services
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="0.4.1" data-path="services-structure-and-api.html">
            
                
                    <a href="./services-structure-and-api.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.4.1.</b>
                        
                         Structure &amp; API
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Ink Protocol</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_3">
                    
                        <h1 id="identities--keys--thumbprints">Identities / Keys &amp; Thumbprints</h1>
<h2 id="keys">Keys</h2>
<p>When creating a new identity you will be able to provide a <a href="http://en.wikipedia.org/wiki/Public-key_cryptography" target="_blank">key pair</a> or allow the Hub to create one for you.</p>
<p>Each identity has two keys: A private and a public one.<br>The keys are stored using the structure proposed by <a href="https://datatracker.ietf.org/doc/draft-ietf-jose-json-web-key/" target="_blank">JWK</a> <a href="http://tools.ietf.org/html/draft-ietf-jose-json-web-key-37" target="_blank">draft 37</a> inside the identity.<br>The private key is stored as _jwk and is available only to the identity&#39;s owner while the public key is stored as jwk and is available to anyone.</p>
<p>Keys are used to verify the identity&#39;s and its instances&#39; authenticity and validity. All instances are signed by their owner so their origin and integrity can be verified.</p>
<p><em>The private key is extremely sensitive and keeping it secure is of the utmost importance; that being said, for the time being it is stored in plain sight.</em></p>
<pre><code class="lang-javascript">{
    <span class="hljs-string">"_jwk"</span>: {
        <span class="hljs-string">"d"</span>: <span class="hljs-string">"3R5wvq-iYhoc86Qec2QcF16Eq5OxhUWLd7bUQJtJN9GVJBb9gfS23tmyTFxj5O48ELpAZg3iuYeSD8V0HmNkKrL7u0a4cMhZGmRuDlO6VC77u0jVltfIHvRnsa1jDFvrnSOMZYZLuT5XsEvK-yd7bCFWGunu8tIGj1pMgp9W2B6Mq2aav7c0ul54fd75XPfGgSC3mKD7EnJbmOYRvSmspm0vrBtlQUJLnoURqliQljN5UP8CdXyNjToJwjiNXl9wupkY176w7Nfmtx-VqyZvUEx4lSCTgnPOwCJvhfsM1k7RoHGxoGExGcZ7XGm8EL_rhCkJH5G8fSPK7a56qb7F6Q"</span>,
        <span class="hljs-string">"dp"</span>: <span class="hljs-string">"ijauonebLOJ_025TByUxxJkJdoxcliTUvCX2wkDXLRubb9gf4Oi9veIgTp8ZcO-Wv91lrWEtWDma1LvYJVmkN9O-xGUit7YMWh8lq1FEhxBI5A-dvZYA-f6oaW8IOdTAy4TvZvh0mk_OwD2KpyIgLWJqTdLUHG0MtMlYSKlmdvU"</span>,
        <span class="hljs-string">"dq"</span>: <span class="hljs-string">"nkJxxqCU-zQBqbmuMjYXak5wUvRbhhN8F9EDd-SB1BxBzivI0e0ca58HAEjykAXYejrTWIF6N7xS9taT4_sDVc3vBB12s1mv8zFivCAvNsc8RJPj1mYXWxqAKv8q3s4JJn53dBSptHOGokI1rnPSfGAhZ0DfPoR2SxACbWogttk"</span>,
        <span class="hljs-string">"e"</span>: <span class="hljs-string">"AQAB"</span>,
        <span class="hljs-string">"kid"</span>: <span class="hljs-string">"BIIF:2RJ3:EB7W:ISA2:ZR6P:X7P7:E5M3:FTZO:QGWD:MD5U:UEGK:CZPV"</span>,
        <span class="hljs-string">"kty"</span>: <span class="hljs-string">"RSA"</span>,
        <span class="hljs-string">"n"</span>: <span class="hljs-string">"4jllO5Znas8nCR-_YnT-82v9g779xhzbV54nDOP18QhjY3yCchDFqLzC85kWFtoP9yMmDgMvKbUXGrvcftvsRCipLwf7z0-v9JvDvuHUeJmWpgcd9quBIkh0-W0gxO_5cz6EeeqRg6gt56sAjBtci-yaPsZ3s9lSETAXhLQAs4OmGlz9rsnrBa2NtPCMvjaaC-Pb7xsnMK7evTA-9toOYFL_jofKi-1MXn1Pk42zX7qrZJzoMj-9YvnCop0OiTV9K936Azc7RvoLJ9X9MuMOavnrCSv9vbpmjQ5kF4SiVOy3TlicY9eHBUZjZQ9s7IDpJz1nX4KtpiNxsk82aDsxwQ"</span>,
        <span class="hljs-string">"p"</span>: <span class="hljs-string">"_xYF63v3q27tK0GqP-Ac6FSmu3QMTXdcyjlgrWwpzH0KenBCnuzFPBwS-ufvnvE4AwdoZTWc9IedBQXCYlFrApSk8scOF8vG2K1dwJRzlLQdgLBDsGEcyy64AlxRrCYy9PQY0_NWZqmZBgsfglzvvzF3sIE0FqyY6B-VjGeiOY8"</span>,
        <span class="hljs-string">"q"</span>: <span class="hljs-string">"4wjmHeoksSCvilc898DBIOpW7r6QAbKuUP21rWxuJmiH-2nzCAkL3I8ccMqOeWava0YIZt3JrFbwnmRYGs1Q8dGJ4p3n7lbahv1dqF_R3UsKIWYllIJaKMK2tjqgE1OhKm3duDS1Espg6M4r5Fk3Y2EzZM_04PnoX0Dr-Bc2F68"</span>,
        <span class="hljs-string">"qi"</span>: <span class="hljs-string">"5rrB7UOHlUCKufOWiMvH_E21cv9kwM9CovMA_yEdY-wRXsLi4C7PIpMDmIHV7VBOEtCQpel410VbZ4dAXQSHetREoDB-yEiJTvaxh2ykgbo61729igrXg0qlmBaOlyKBAWttSUsNiDf_UldUOcekk9gRZi6B68EjzbJm4-iz0qA"</span>
    },
    <span class="hljs-string">"jwk"</span>: {
        <span class="hljs-string">"e"</span>: <span class="hljs-string">"AQAB"</span>,
        <span class="hljs-string">"kid"</span>: <span class="hljs-string">"BIIF:2RJ3:EB7W:ISA2:ZR6P:X7P7:E5M3:FTZO:QGWD:MD5U:UEGK:CZPV"</span>,
        <span class="hljs-string">"kty"</span>: <span class="hljs-string">"RSA"</span>,
        <span class="hljs-string">"n"</span>: <span class="hljs-string">"4jllO5Znas8nCR-_YnT-82v9g779xhzbV54nDOP18QhjY3yCchDFqLzC85kWFtoP9yMmDgMvKbUXGrvcftvsRCipLwf7z0-v9JvDvuHUeJmWpgcd9quBIkh0-W0gxO_5cz6EeeqRg6gt56sAjBtci-yaPsZ3s9lSETAXhLQAs4OmGlz9rsnrBa2NtPCMvjaaC-Pb7xsnMK7evTA-9toOYFL_jofKi-1MXn1Pk42zX7qrZJzoMj-9YvnCop0OiTV9K936Azc7RvoLJ9X9MuMOavnrCSv9vbpmjQ5kF4SiVOy3TlicY9eHBUZjZQ9s7IDpJz1nX4KtpiNxsk82aDsxwQ"</span>
    }
}
</code></pre>
<h2 id="thumbprints">Thumbprints</h2>
<p>Identities cannot use their FQDN as an identitier as users should be able to change their FQDNs without destroying their relationships with others or the ownership of the instances they have created or have access to. Secret/Public keys solve part of this problem as using their secret key a user can validate their identity.</p>
<p>In order to create a unique identifier by which we can safely refer an identity even after changing its FQDN we will use the <a href="https://datatracker.ietf.org/doc/draft-jones-jose-jwk-thumbprint/" target="_blank">JWK Thumbprint</a> <a href="http://tools.ietf.org/html/draft-jones-jose-jwk-thumbprint-01" target="_blank">draft 01</a> proposal on the identity&#39;s Public key.</p>
<p>[RFC] The JWK Thumbprint draft encodes the SHA256 signature as base64url, while this is kept intact when storing the thumbprint in the JSON structure of the public key, for the Identity&#39;s id a hex encoded version or the SHA256 is used.<br><em>[Note:geoah] I am not quite sure why do this but for some reason HEX and fixed length makes more sense as an identifier.</em></p>
<p>This will effectively create a hash of the identity&#39;s Public key that we can use as an identifier. Any reference to this identity must use this thumbprint.</p>
<pre><code class="lang-javascript">{
    <span class="hljs-string">"id"</span>: <span class="hljs-string">"1fd13882380f27b3176f294ce5834e01e1185d4f8e559e0d86928998e9d8cd18"</span>
}
</code></pre>
<p><em>[Note:geoah] A crude example of keys and thumbprint generation and encoding in golang can be found <a href="https://gist.github.com/geoah/525b9cc76121ba3e29f8" target="_blank">here</a>.</em></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./identities-structure-and-api.html" class="navigation navigation-prev " aria-label="Previous page: Structure &amp; API"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./schemas.html" class="navigation navigation-next " aria-label="Next page: Schemas"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
